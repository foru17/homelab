[custom]

; ==========================================================
; ZUOLUOTV - Mobile (自建优先 + 国家出口备选)
; - 手机端不搞入口/链路/双跳
; - 业务分流保留，且每个业务组可按国家出口指定
; - 默认策略：自建优先 -> 国家出口 -> 自动选择 -> DIRECT
; ==========================================================


; =========================
; 1) Rulesets
; =========================

; 你的自定义
ruleset=奇葩流量,https://raw.githubusercontent.com/foru17/homelab/main/clash/Magic.list
ruleset=国内流量,https://raw.githubusercontent.com/foru17/homelab/main/clash/Direct.list

; AI
ruleset=AI,https://raw.githubusercontent.com/foru17/homelab/main/clash/AI.list
ruleset=AI,https://raw.githubusercontent.com/cutethotw/ClashRule/main/Rule/ChatGPT.list
ruleset=AI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
ruleset=AI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
ruleset=AI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
ruleset=AI,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml

; 常用业务
ruleset=YouTube,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
ruleset=Netflix,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
ruleset=Spotify,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
ruleset=TikTok,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
ruleset=Telegram,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
ruleset=GitHub,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml

; 大厂服务
ruleset=谷歌服务,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
ruleset=微软服务,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
ruleset=苹果服务,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml

; 国内补强（手机端保留常用即可）
ruleset=国内流量,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=国内流量,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=国内流量,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
ruleset=国内流量,[]GEOIP,LAN,no-resolve
ruleset=国内流量,[]GEOIP,CN,no-resolve

; 最终兜底
ruleset=漏网之鱼,[]FINAL


; =========================
; 2) Proxy Groups (Mobile)
; =========================

; ---------- 操作层 ----------
custom_proxy_group=手动选择`select`.*

; 自动选择（测速）：
; 排除明显的直连/免流/运营商关键字，避免测速误选
custom_proxy_group=自动选择`url-test`(^(?!.*(电信|联通|移动|FREE|直连|Direct|LAN)).*)`http://www.gstatic.com/generate_204`300,,50

; 自建节点：建议用 fallback（自建内部自动故障转移）
; 你可以按你的命名再补关键词：OWO / SJC / Sakura / GC / Ali 等
custom_proxy_group=自建节点`fallback`(?i)(Home|DG|SZ|RDP|Lei|自建|OWO|SJC|Sakura|GC|Ali).*`http://www.gstatic.com/generate_204`300,,50


; ---------- 国家出口层 ----------
; 注意：这里是“节点名正则”，命中率取决于你节点命名是否带国家信息
custom_proxy_group=🇺🇸 美国出口`select`(?i)(🇺🇸|\\bUS\\b|美国|United\\s*States|America|OWO|SJC|ESA|Edge|CF|LAX|SEA).*
custom_proxy_group=🇯🇵 日本出口`select`(?i)(🇯🇵|\\bJP\\b|日本|Japan|Tokyo|Osaka|Sakura|SoftBank|TYO).*
custom_proxy_group=🇭🇰 香港出口`select`(?i)(🇭🇰|\\bHK\\b|香港|Hong\\s*Kong|港).*
custom_proxy_group=🇸🇬 新加坡出口`select`(?i)(🇸🇬|\\bSG\\b|新加坡|Singapore).*
custom_proxy_group=🌍 其他地区出口`select`.*


; ---------- 总出口 ----------
; 自建优先 -> 国家出口 -> 自动 -> 手动 -> DIRECT
custom_proxy_group=国外流量`select`[]自建节点`[]🇺🇸 美国出口`[]🇯🇵 日本出口`[]🇭🇰 香港出口`[]🇸🇬 新加坡出口`[]🌍 其他地区出口`[]自动选择`[]手动选择`[]DIRECT

custom_proxy_group=国内流量`select`[]DIRECT`[]国外流量


; ---------- 业务组（自建优先 + 可指定国家） ----------
custom_proxy_group=奇葩流量`select`[]自建节点`[]国外流量`[]DIRECT

custom_proxy_group=AI`select`[]自建节点`[]🇺🇸 美国出口`[]🇯🇵 日本出口`[]🇭🇰 香港出口`[]🇸🇬 新加坡出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=YouTube`select`[]自建节点`[]🇯🇵 日本出口`[]🇺🇸 美国出口`[]🇭🇰 香港出口`[]🇸🇬 新加坡出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=Netflix`select`[]自建节点`[]🇯🇵 日本出口`[]🇺🇸 美国出口`[]🇭🇰 香港出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=Spotify`select`[]自建节点`[]🇭🇰 香港出口`[]🇯🇵 日本出口`[]🇺🇸 美国出口`[]🇸🇬 新加坡出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=TikTok`select`[]自建节点`[]🇯🇵 日本出口`[]🇸🇬 新加坡出口`[]🇺🇸 美国出口`[]🇭🇰 香港出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=Telegram`select`[]自建节点`[]🇭🇰 香港出口`[]🇯🇵 日本出口`[]🇺🇸 美国出口`[]🌍 其他地区出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=GitHub`select`[]自建节点`[]🇺🇸 美国出口`[]🇯🇵 日本出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=谷歌服务`select`[]自建节点`[]🇺🇸 美国出口`[]🇯🇵 日本出口`[]🇭🇰 香港出口`[]国外流量`[]自动选择`[]DIRECT

custom_proxy_group=微软服务`select`[]DIRECT`[]自建节点`[]🇺🇸 美国出口`[]国外流量`[]自动选择

custom_proxy_group=苹果服务`select`[]DIRECT`[]自建节点`[]🇭🇰 香港出口`[]🇯🇵 日本出口`[]国外流量`[]自动选择


; ---------- 兜底 ----------
custom_proxy_group=漏网之鱼`select`[]国外流量`[]国内流量`[]DIRECT


; =========================
; 3) Generator Switch
; =========================
enable_rule_generator=true
overwrite_original_rules=true
